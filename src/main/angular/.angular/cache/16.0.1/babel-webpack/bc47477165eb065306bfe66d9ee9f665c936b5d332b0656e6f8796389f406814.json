{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AppComponent = class AppComponent {\n  constructor(http) {\n    this.http = http;\n    this.buckets = [];\n    this.bucketName = '';\n    this.files = [];\n    this.selectedBucket = '';\n    this.baseUrl = 'http://localhost:8080'; // Spring Boot 项目的 URL\n  }\n\n  ngOnInit() {\n    this.listBuckets();\n    this.getFiles();\n  }\n  formatSize(size) {\n    if (size < 1024) {\n      return size + ' B';\n    } else if (size < 1024 * 1024) {\n      return (size / 1024).toFixed(2) + ' KB';\n    } else if (size < 1024 * 1024 * 1024) {\n      return (size / 1024 / 1024).toFixed(2) + ' MB';\n    } else {\n      return (size / 1024 / 1024 / 1024).toFixed(2) + ' GB';\n    }\n  }\n  listBuckets() {\n    this.http.get('http://localhost:8080/listBuckets').subscribe(response => {\n      this.buckets = response.buckets;\n    });\n  }\n  createBucket() {\n    this.http.post(`http://localhost:8080/createBucket?bucketName=${this.bucketName}`, {}).subscribe(response => {\n      console.log(response);\n      this.listBuckets();\n    });\n  }\n  deleteBucket(bucketName) {\n    this.http.post(`http://localhost:8080/deleteBucket?bucketName=${bucketName}`, null).subscribe(response => {\n      if (response.message === '删除成功') {\n        this.buckets = this.buckets.filter(bucket => bucket !== bucketName);\n      } else {\n        // 处理删除失败的情况\n      }\n    });\n  }\n  uploadFile(event, bucketName) {\n    const file = event.target.files[0];\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('bucketName', bucketName);\n    this.http.post(`${this.baseUrl}/upload`, formData).subscribe(data => {\n      console.log(data);\n      this.getFiles();\n    }, error => {\n      console.log(error);\n    });\n  }\n  getFiles() {\n    if (this.selectedBucket) {\n      this.http.get(`${this.baseUrl}/list?bucketName=${this.selectedBucket}`).subscribe(data => {\n        this.files = data;\n      }, error => {\n        console.log(error);\n      });\n    }\n  }\n  downloadFile(name) {\n    this.http.get(`${this.baseUrl}/download/${name}?bucketName=${this.selectedBucket}`, {\n      responseType: 'blob'\n    }).subscribe(data => {\n      const url = window.URL.createObjectURL(data);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = name;\n      link.click();\n    }, error => {\n      console.log(error);\n    });\n  }\n  deleteFile(name) {\n    this.http.delete(`${this.baseUrl}/delete/${name}?bucketName=${this.selectedBucket}`, {\n      responseType: 'text'\n    }).subscribe(data => {\n      console.log(data);\n      this.getFiles(); // 重新获取文件列表\n    }, error => {\n      console.log(error);\n    });\n  }\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})], AppComponent);\nexport { AppComponent };","map":{"version":3,"names":["Component","AppComponent","constructor","http","buckets","bucketName","files","selectedBucket","baseUrl","ngOnInit","listBuckets","getFiles","formatSize","size","toFixed","get","subscribe","response","createBucket","post","console","log","deleteBucket","message","filter","bucket","uploadFile","event","file","target","formData","FormData","append","data","error","downloadFile","name","responseType","url","window","URL","createObjectURL","link","document","createElement","href","download","click","deleteFile","delete","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\Mdge\\vey\\src\\main\\angular\\src\\app\\app.component.ts"],"sourcesContent":["import { Component, OnInit} from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\ninterface File {\n  name: string;\n  lastModified: string;\n  size: number;\n  message: string;\n}\n\ninterface DeleteBucketResponse {\n  message: string;\n}\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent {\n  buckets: string[] = [];\n  bucketName: string = '';\n  files: File[] = [];\n  selectedBucket: string = '';\n  private baseUrl = 'http://localhost:8080'; // Spring Boot 项目的 URL\n\n  constructor(private http: HttpClient) {}\n\n  ngOnInit() {\n    this.listBuckets();\n    this.getFiles();\n  }\n  formatSize(size: number): string {\n    if (size < 1024) {\n      return size + ' B';\n    } else if (size < 1024 * 1024) {\n      return (size / 1024).toFixed(2) + ' KB';\n    } else if (size < 1024 * 1024 * 1024) {\n      return (size / 1024 / 1024).toFixed(2) + ' MB';\n    } else {\n      return (size / 1024 / 1024 / 1024).toFixed(2) + ' GB';\n    }\n  }\n  listBuckets() {\n    this.http.get<{ buckets: string[] }>('http://localhost:8080/listBuckets').subscribe(response => {\n      this.buckets = response.buckets;\n    });\n  }\n  createBucket() {\n    this.http.post(`http://localhost:8080/createBucket?bucketName=${this.bucketName}`, {}).subscribe(response => {\n      console.log(response);\n      this.listBuckets();\n    });\n  }\n\n  deleteBucket(bucketName: string) {\n    this.http.post<DeleteBucketResponse>(`http://localhost:8080/deleteBucket?bucketName=${bucketName}`, null).subscribe(response => {\n      if (response.message === '删除成功') {\n        this.buckets = this.buckets.filter(bucket => bucket !== bucketName);\n      } else {\n        // 处理删除失败的情况\n      }\n    });\n  }\n\n\n  uploadFile(event: any, bucketName: string) {\n    const file = event.target.files[0];\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('bucketName', bucketName);\n\n    this.http.post(`${this.baseUrl}/upload`, formData).subscribe(\n      data => {\n        console.log(data);\n        this.getFiles();\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n\n  getFiles() {\n    if (this.selectedBucket) {\n      this.http.get<File[]>(`${this.baseUrl}/list?bucketName=${this.selectedBucket}`).subscribe(\n        data => {\n          this.files = data;\n        },\n        error => {\n          console.log(error);\n        }\n      );\n    }\n  }\n\n  downloadFile(name: string) {\n    this.http.get(`${this.baseUrl}/download/${name}?bucketName=${this.selectedBucket}`, { responseType: 'blob' }).subscribe(\n      data => {\n        const url = window.URL.createObjectURL(data);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = name;\n        link.click();\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n\n  deleteFile(name: string) {\n    this.http.delete(`${this.baseUrl}/delete/${name}?bucketName=${this.selectedBucket}`, { responseType: 'text' }).subscribe(\n      data => {\n        console.log(data);\n        this.getFiles(); // 重新获取文件列表\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}